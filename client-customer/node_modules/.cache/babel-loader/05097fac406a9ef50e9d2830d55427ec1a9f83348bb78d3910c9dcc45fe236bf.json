{"ast":null,"code":"import axios from'axios';import React,{Component}from'react';import{Link}from'react-router-dom';import withRouter from'../utils/withRouter';import'@fortawesome/fontawesome-free/css/all.min.css';import'../Css/Menu.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";class Menu extends Component{constructor(props){super(props);this.typeEffect=()=>{this.timer=setInterval(()=>{if(this.index<this.autoTypeText.length){this.setState(prevState=>({placeholder:this.autoTypeText.substring(0,this.index+1)}));this.index++;}else{clearInterval(this.timer);setTimeout(()=>{this.setState({placeholder:''});this.index=0;this.typeEffect();},1500);}},200);};this.handleFocus=()=>{this.setState({placeholder:'',isTyping:true});clearInterval(this.timer);clearTimeout(this.inactivityTimeout);};this.handleBlur=()=>{this.setState({isTyping:false});this.restartTypingEffect();};this.restartTypingEffect=()=>{clearTimeout(this.inactivityTimeout);this.inactivityTimeout=setTimeout(()=>{this.index=0;this.setState({placeholder:''},()=>{this.typeEffect();});},2000);};this.state={categories:[],txtKeyword:'',placeholder:'',isTyping:false,isLoading:true,error:null};this.autoTypeText=\"Hôm nay bạn cần mua gì?\";this.index=0;this.timer=null;this.inactivityTimeout=null;}render(){const{categories,isLoading,error,txtKeyword,placeholder}=this.state;if(isLoading){return/*#__PURE__*/_jsx(\"p\",{children:\"Loading categories...\"});}if(error){return/*#__PURE__*/_jsxs(\"p\",{children:[\"Error fetching categories: \",error.message]});}const cates=categories.map(item=>{return/*#__PURE__*/_jsx(\"li\",{className:\"menu\",children:/*#__PURE__*/_jsx(Link,{to:'/product/category/'+item._id,className:\"styled-link\",children:item.name})},item._id);});return/*#__PURE__*/_jsxs(\"div\",{className:\"border-bottom menu-container\",children:[/*#__PURE__*/_jsxs(\"ul\",{className:\"menu\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"menu\",children:/*#__PURE__*/_jsxs(Link,{to:\"/\",className:\"home-style\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"letter\",children:\"T\"}),/*#__PURE__*/_jsx(\"span\",{className:\"letter\",children:\"e\"}),/*#__PURE__*/_jsx(\"span\",{className:\"letter\",children:\"c\"}),/*#__PURE__*/_jsx(\"span\",{className:\"letter\",children:\"h\"}),/*#__PURE__*/_jsx(\"span\",{className:\"letter\",children:\"Z\"}),/*#__PURE__*/_jsx(\"span\",{className:\"letter\",children:\"o\"}),/*#__PURE__*/_jsx(\"span\",{className:\"letter\",children:\"n\"}),/*#__PURE__*/_jsx(\"span\",{className:\"letter\",children:\"e\"})]})}),cates]}),/*#__PURE__*/_jsxs(\"form\",{className:\"search\",onSubmit:e=>this.btnSearchClick(e),children:[/*#__PURE__*/_jsx(\"input\",{type:\"search\",placeholder:placeholder,className:\"keyword\",value:txtKeyword,onFocus:this.handleFocus,onChange:e=>this.setState({txtKeyword:e.target.value}),onBlur:this.handleBlur}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"styled-button\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-search\"})})]})]});}componentDidMount(){this.apiGetCategories();this.typeEffect();}componentWillUnmount(){clearInterval(this.timer);clearTimeout(this.inactivityTimeout);}btnSearchClick(e){e.preventDefault();const{txtKeyword}=this.state;if(txtKeyword.trim()!==''){this.props.navigate('/product/search/'+txtKeyword);}else{alert('Please enter a keyword to search.');}}apiGetCategories(){axios.get('/api/customer/categories').then(res=>{this.setState({categories:res.data,isLoading:false});}).catch(error=>{this.setState({error,isLoading:false});});}}export default withRouter(Menu);","map":{"version":3,"names":["axios","React","Component","Link","withRouter","jsx","_jsx","jsxs","_jsxs","Menu","constructor","props","typeEffect","timer","setInterval","index","autoTypeText","length","setState","prevState","placeholder","substring","clearInterval","setTimeout","handleFocus","isTyping","clearTimeout","inactivityTimeout","handleBlur","restartTypingEffect","state","categories","txtKeyword","isLoading","error","render","children","message","cates","map","item","className","to","_id","name","onSubmit","e","btnSearchClick","type","value","onFocus","onChange","target","onBlur","componentDidMount","apiGetCategories","componentWillUnmount","preventDefault","trim","navigate","alert","get","then","res","data","catch"],"sources":["T:/DinhThien/Bai tap/Lập trình web/WebShoppineOnline-MERN-main/WebShoppineOnline-MERN-main/client-customer/src/components/MenuComponent.js"],"sourcesContent":["import axios from 'axios';\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport withRouter from '../utils/withRouter';\nimport '@fortawesome/fontawesome-free/css/all.min.css';\nimport '../Css/Menu.css';\n\nclass Menu extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      categories: [],\n      txtKeyword: '',\n      placeholder: '',\n      isTyping: false,\n      isLoading: true,\n      error: null\n    };\n    this.autoTypeText = \"Hôm nay bạn cần mua gì?\"; \n    this.index = 0;\n    this.timer = null; \n    this.inactivityTimeout = null; \n  }\n\n  render() {\n    const { categories, isLoading, error, txtKeyword, placeholder } = this.state;\n\n    if (isLoading) {\n      return <p>Loading categories...</p>;\n    }\n\n    if (error) {\n      return <p>Error fetching categories: {error.message}</p>;\n    }\n\n    const cates = categories.map((item) => {\n      return (\n        <li key={item._id} className=\"menu\">\n          <Link to={'/product/category/' + item._id} className=\"styled-link\">{item.name}</Link>\n        </li>\n      );\n    });\n\n    return (\n      <div className=\"border-bottom menu-container\">\n        <ul className=\"menu\">\n          <li className=\"menu\">\n            <Link to='/' className=\"home-style\">\n              <span className=\"letter\">T</span>\n              <span className=\"letter\">e</span>\n              <span className=\"letter\">c</span>\n              <span className=\"letter\">h</span>\n              <span className=\"letter\">Z</span>\n              <span className=\"letter\">o</span>\n              <span className=\"letter\">n</span>\n              <span className=\"letter\">e</span>\n            </Link>\n          </li>\n          {cates}\n        </ul>\n\n        <form className=\"search\" onSubmit={(e) => this.btnSearchClick(e)}>\n          <input\n            type=\"search\"\n            placeholder={placeholder}\n            className=\"keyword\"\n            value={txtKeyword}\n            onFocus={this.handleFocus}\n            onChange={(e) => this.setState({ txtKeyword: e.target.value })}\n            onBlur={this.handleBlur}\n          />\n          <button type=\"submit\" className=\"styled-button\">\n            <i className=\"fas fa-search\"></i>\n          </button>\n        </form>\n      </div>\n    );\n  }\n\n  componentDidMount() {\n    this.apiGetCategories();\n    this.typeEffect();\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.timer);\n    clearTimeout(this.inactivityTimeout); \n  }\n\n  typeEffect = () => {\n    this.timer = setInterval(() => {\n      if (this.index < this.autoTypeText.length) {\n        this.setState((prevState) => ({\n          placeholder: this.autoTypeText.substring(0, this.index + 1),\n        }));\n        this.index++;\n      } else {\n        clearInterval(this.timer);\n        setTimeout(() => {\n          this.setState({ placeholder: '' });\n          this.index = 0;\n          this.typeEffect();\n        }, 1500);\n      }\n    }, 200);\n  };\n\n  handleFocus = () => {\n    this.setState({ placeholder: '', isTyping: true });\n    clearInterval(this.timer);\n    clearTimeout(this.inactivityTimeout);\n  };\n\n  handleBlur = () => {\n    this.setState({ isTyping: false });\n    this.restartTypingEffect();\n  };\n\n  restartTypingEffect = () => {\n    clearTimeout(this.inactivityTimeout); \n    this.inactivityTimeout = setTimeout(() => {\n      this.index = 0;\n      this.setState({ placeholder: '' }, () => {\n        this.typeEffect();\n      });\n    }, 2000);\n  };\n\n  btnSearchClick(e) {\n    e.preventDefault();\n    const { txtKeyword } = this.state;\n    if (txtKeyword.trim() !== '') {\n      this.props.navigate('/product/search/' + txtKeyword);\n    } else {\n      alert('Please enter a keyword to search.');\n    }\n  }\n\n  apiGetCategories() {\n    axios.get('/api/customer/categories')\n      .then((res) => {\n        this.setState({ categories: res.data, isLoading: false });\n      })\n      .catch((error) => {\n        this.setState({ error, isLoading: false });\n      });\n  }\n}\n\nexport default withRouter(Menu);"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}