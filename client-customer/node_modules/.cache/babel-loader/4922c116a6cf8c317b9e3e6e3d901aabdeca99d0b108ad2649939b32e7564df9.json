{"ast":null,"code":"import axios from'axios';import React,{Component}from'react';import{Navigate}from'react-router-dom';import MyContext from'../contexts/MyContext';import{FaUser,FaLock,FaEnvelope,FaPhone}from'react-icons/fa';import'../Css/MyProfile.css';// Import CSS cho kiểu dáng\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";class Myprofile extends Component{constructor(props){super(props);this.btnUpdateClick=e=>{e.preventDefault();const{txtUsername,txtPassword,txtEmail,txtPhone}=this.state;if(txtUsername&&txtPassword&&txtEmail&&txtPhone){const customer={username:txtUsername,password:txtPassword,email:txtEmail,phone:txtPhone};this.apiPutCustomer(this.context.customer._id,customer);}else{alert('Please input all fields');}};this.toggleShowPassword=()=>{this.setState(prevState=>({showPassword:!prevState.showPassword}));};this.handleBackClick=()=>{this.setState({redirectToHome:true});};this.state={txtUsername:'',txtPassword:'',txtEmail:'',txtPhone:'',showPassword:false,// Ẩn/hiện mật khẩu\nredirectToHome:false// Trạng thái điều hướng về trang chủ\n};}componentDidMount(){if(this.context.customer){this.setState({txtUsername:this.context.customer.username,txtPassword:this.context.customer.password,txtEmail:this.context.customer.email||'',txtPhone:this.context.customer.phone||''});}}apiPutCustomer(id,customer){const config={headers:{'x-access-token':this.context.token}};axios.put(\"/api/customer/customers/\".concat(id),customer,config).then(res=>{const result=res.data;if(result){alert('Update successful!');this.context.setCustomer(result);}else{alert('Update failed!');}});}render(){const{token}=this.context;const{redirectToHome}=this.state;if(redirectToHome){return/*#__PURE__*/_jsx(Navigate,{to:\"/\"});}if(token==='')return/*#__PURE__*/_jsx(Navigate,{replace:true,to:\"/login\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"body-profile\",children:[/*#__PURE__*/_jsx(\"video\",{autoPlay:true,loop:true,muted:true,className:\"background-video\",children:/*#__PURE__*/_jsx(\"source\",{src:\"video-profile.mp4\",type:\"video/mp4\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-container\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"custom-form\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"form-title\",children:\"My Profile\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Username\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-icon\",children:[/*#__PURE__*/_jsx(FaUser,{}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Username\",value:this.state.txtUsername,readOnly:true,className:\"no-change\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-icon\",children:[/*#__PURE__*/_jsx(FaLock,{}),/*#__PURE__*/_jsx(\"input\",{type:this.state.showPassword?'text':'password',placeholder:\"Password\",value:this.state.txtPassword,onChange:e=>this.setState({txtPassword:e.target.value})}),/*#__PURE__*/_jsx(\"span\",{onClick:this.toggleShowPassword,className:\"toggle-password\",children:this.state.showPassword?'Hide':'Show'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-icon\",children:[/*#__PURE__*/_jsx(FaEnvelope,{}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"example@company.com\",value:this.state.txtEmail,onChange:e=>this.setState({txtEmail:e.target.value})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Phone\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-icon\",children:[/*#__PURE__*/_jsx(FaPhone,{}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",placeholder:\"Phone Number\",value:this.state.txtPhone,onChange:e=>this.setState({txtPhone:e.target.value})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-row\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"submit-button\",onClick:this.btnUpdateClick,children:\"UPDATE\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-row\",children:/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"back-button\",onClick:this.handleBackClick,children:[/*#__PURE__*/_jsx(\"span\",{className:\"hand left-hand\",children:\"\\uD83D\\uDC49\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text\",children:\"BACK TO HOME\"}),/*#__PURE__*/_jsx(\"span\",{className:\"hand right-hand\",children:\"\\uD83D\\uDC48\"})]})})]})})]});}}Myprofile.contextType=MyContext;export default Myprofile;","map":{"version":3,"names":["axios","React","Component","Navigate","MyContext","FaUser","FaLock","FaEnvelope","FaPhone","jsx","_jsx","jsxs","_jsxs","Myprofile","constructor","props","btnUpdateClick","e","preventDefault","txtUsername","txtPassword","txtEmail","txtPhone","state","customer","username","password","email","phone","apiPutCustomer","context","_id","alert","toggleShowPassword","setState","prevState","showPassword","handleBackClick","redirectToHome","componentDidMount","id","config","headers","token","put","concat","then","res","result","data","setCustomer","render","to","replace","className","children","autoPlay","loop","muted","src","type","placeholder","value","readOnly","onChange","target","onClick","contextType"],"sources":["T:/DinhThien/Bai tap/Lập trình web/WebShoppineOnline-MERN-main/WebShoppineOnline-MERN-main/client-customer/src/components/MyprofileComponent.js"],"sourcesContent":["import axios from 'axios';\nimport React, { Component } from 'react';\nimport { Navigate } from 'react-router-dom';\nimport MyContext from '../contexts/MyContext';\nimport { FaUser, FaLock, FaEnvelope, FaPhone } from 'react-icons/fa';\nimport '../Css/MyProfile.css'; // Import CSS cho kiểu dáng\n\nclass Myprofile extends Component {\n  static contextType = MyContext;\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      txtUsername: '',\n      txtPassword: '',\n      txtEmail: '',\n      txtPhone: '',\n      showPassword: false, // Ẩn/hiện mật khẩu\n      redirectToHome: false, // Trạng thái điều hướng về trang chủ\n    };\n  }\n\n  componentDidMount() {\n    if (this.context.customer) {\n      this.setState({\n        txtUsername: this.context.customer.username,\n        txtPassword: this.context.customer.password,\n        txtEmail: this.context.customer.email || '',\n        txtPhone: this.context.customer.phone || '',\n      });\n    }\n  }\n\n  btnUpdateClick = (e) => {\n    e.preventDefault();\n    const { txtUsername, txtPassword, txtEmail, txtPhone } = this.state;\n    if (txtUsername && txtPassword && txtEmail && txtPhone) {\n      const customer = { \n        username: txtUsername, \n        password: txtPassword, \n        email: txtEmail, \n        phone: txtPhone \n      };\n      this.apiPutCustomer(this.context.customer._id, customer);\n    } else {\n      alert('Please input all fields');\n    }\n  };\n\n  apiPutCustomer(id, customer) {\n    const config = { headers: { 'x-access-token': this.context.token } };\n    axios.put(`/api/customer/customers/${id}`, customer, config).then((res) => {\n      const result = res.data;\n      if (result) {\n        alert('Update successful!');\n        this.context.setCustomer(result);\n      } else {\n        alert('Update failed!');\n      }\n    });\n  }\n\n  toggleShowPassword = () => {\n    this.setState((prevState) => ({\n      showPassword: !prevState.showPassword,\n    }));\n  };\n\n  handleBackClick = () => {\n    this.setState({ redirectToHome: true });\n  };\n\n  render() {\n    const { token } = this.context;\n    const { redirectToHome } = this.state;\n\n    if (redirectToHome) {\n      return <Navigate to=\"/\" />;\n    }\n\n    if (token === '') return <Navigate replace to='/login' />;\n\n    return (\n    <div className='body-profile'>\n              <video autoPlay loop muted className=\"background-video\">\n          <source src=\"video-profile.mp4\" type=\"video/mp4\" />\n        </video>\n      <div className=\"form-container\">\n        <form className=\"custom-form\">\n          <h1 className=\"form-title\">My Profile</h1>\n\n          {/* Username */}\n          <div className=\"form-group\">\n            <label>Username</label>\n            <div className=\"input-icon\">\n              <FaUser />\n              <input\n                type=\"text\"\n                placeholder=\"Username\"\n                value={this.state.txtUsername}\n                readOnly\n                className=\"no-change\"\n              />\n            </div>\n          </div>\n\n          {/* Password */}\n          <div className=\"form-group\">\n            <label>Password</label>\n            <div className=\"input-icon\">\n              <FaLock />\n              <input\n                type={this.state.showPassword ? 'text' : 'password'}\n                placeholder=\"Password\"\n                value={this.state.txtPassword}\n                onChange={(e) => this.setState({ txtPassword: e.target.value })}\n              />\n              <span onClick={this.toggleShowPassword} className=\"toggle-password\">\n                {this.state.showPassword ? 'Hide' : 'Show'}\n              </span>\n            </div>\n          </div>\n\n          {/* Email */}\n          <div className=\"form-group\">\n            <label>Email</label>\n            <div className=\"input-icon\">\n              <FaEnvelope />\n              <input\n                type=\"email\"\n                placeholder=\"example@company.com\"\n                value={this.state.txtEmail}\n                onChange={(e) => this.setState({ txtEmail: e.target.value })}\n              />\n            </div>\n          </div>\n\n          {/* Phone */}\n          <div className=\"form-group\">\n            <label>Phone</label>\n            <div className=\"input-icon\">\n              <FaPhone />\n              <input\n                type=\"tel\"\n                placeholder=\"Phone Number\"\n                value={this.state.txtPhone}\n                onChange={(e) => this.setState({ txtPhone: e.target.value })}\n              />\n            </div>\n          </div>\n\n          {/* Update Button */}\n          <div className=\"form-row\">\n            <button type=\"submit\" className=\"submit-button\" onClick={this.btnUpdateClick}>\n              UPDATE\n            </button>\n          </div>\n\n{/* Back Button */}\n<div className=\"form-row\">\n  <button type=\"button\" className=\"back-button\" onClick={this.handleBackClick}>\n    <span className=\"hand left-hand\">👉</span>\n    <span className=\"text\">BACK TO HOME</span>\n    <span className=\"hand right-hand\">👈</span>\n  </button>\n</div>\n\n        </form>\n      </div>\n      </div>\n    );\n  }\n}\n\nexport default Myprofile;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}